{%extends 'base.html' %}
{% load staticfiles %}

<html>
	<head>
	    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/visorTest.css' %}">
	</head>
	{%block content%}
	<body ng-app="dynamicFormsFramework">
		<div id="page-wrapper">
	        {% verbatim %} 
	        <div class="content" ng-controller="EditorCtrl as visor">
	            <div class ="row">
		            <div class=" col-md-2"></div>
		            	<div class=" col-md-6">
			               <div  ng-include="'palette'"></div>  
			            </div>   
		            </div>
	            <div class="row">
	                <div class="col-md-2 "></div>
	                <div class=" col-md-6">
	                    <div class="panel panel-primary ">
	                        <div class="panel-heading text-center">
                                <h1>Titulo:
                                    <input  class="form-control" type="text" ng-model="visor.form.title"/>
                                </h1>
                            </div>
                            <form role="form" class="panel-body" >
                                <div  ng-repeat="page in visor.pages"  ng-click="visor.selectPage($index)"> 
                                    <div class="pull-right">
                                        <label>Page {{$index + 1}}</label>
                                        <button class="btn" ng-show="editorMode" ng-click="visor.deletePage($index)"
                                                style="background-color:transparent;padding:0;">
                                            <span class="glyphicon glyphicon-remove"></span>
                                        </button>
                                    </div>
                                    <div class="text-center">
                                        <label>Subtitle: </label>
                                        <input type="text" ng-model="page.subTitle"/>   
                                    </div>
                                    <div  ng-repeat="question in page.fields"  ng-click="visor.selectField($parent.$index, $index)"
                                            style="padding:10px;" itemcell> 
                                        <label>{{$index + 1}}. {{question.text}}</label>
                                        <button class="btn pull-right" ng-show="editorMode" ng-click="visor.deleteField($parent.$index, $index)"
                                                style="background-color:transparent;padding:0;">
                                            <span class="glyphicon glyphicon-remove"></span>
                                        </button>
                                        <div class="form-group" >
                                            <div ng-include="question.field_type"></div>
                                        </div>
                                    </div>
                                    <hr/>
                                </div>
                                <div class="text-right">
                                    <button type="submit" ng-click="visor.submitForm()" class="btn btn-default">Publish</button>
                                    <button type="submit" ng-click="visor.saveForm()" class="btn btn-default">Save</button>
                                </div>
                            </form>
                            <pre>form: {{visor.form|json}}</pre>
                            <pre>pages: {{visor.pages|json}}</pre>
                            <pre>version: {{visor.version|json}}</pre>
	                    </div>
	                </div>  
	                <div class="col-md-3" style= " margin-left:2%" >                  
	                     <div  ng-include="'modify_input'"></div>      
	                </div>
	            </div>
	        </div>
	    {%endverbatim%}
            <script src={% static "jquery/js/jquery-2.1.1.min.js" %}></script>
            <script src={% static "jquery/js/jquery-ui.min.js" %}></script>
		    <script src={% static "angular/angular.min.js" %}></script>
            <script src={% static "angular/angular-ui-router.js" %}></script>
		    <script src={% static "js/app.js" %}></script>
            <script src={% static "js/editorCtrl.js" %}></script>
		</div> <!-- div de page-wrapper -->
	    {%endblock%}
	</body>
</html>
