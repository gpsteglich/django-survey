{%extends 'base.html' %}
{% load staticfiles %}

<!DOCTYPE html>
<html lang="en">
{%block content%}
    <body>
        <div id="page-wrapper" ng-controller="MainPageCtrl as mainPage">
            <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Forms 
                        </h1>
                    </div>
                </div>

                    {% verbatim %} 

                    <div class="combo_order col-md-2 col-md-push-8">
                        <div>
                            <select ng-model="myOrder" ng-init="myOrder = mainPage.orders[0]" 
                                    ng-options="order.name for order in mainPage.orders" class="form-control"></select>
                        </div>
                        <div class = "btn-group" name="rbtn_ascdsc">
                            <input type="radio" ng-click="mainPage.selectascdsc('asc')" name="ascdsc" value="ASC" checked>
                            <span class="glyphicon glyphicon-arrow-up"></span>ASC
                            <input type="radio" ng-click="mainPage.selectascdsc('dsc')" name="ascdsc" value="DSC">
                            <span class="glyphicon glyphicon-arrow-down"></span>DSC
                        </div>
                        <a href="/dynamicForms/main/{{myOrder.value}}/{{mainPage.ascdsc}}" type="button">Ordenar</a>
                
                    </div>
                    {% endverbatim %} 

                    
                </br>
                <div class="row">
				    <div class="col-sm-11">
				        <div class="list-group">
                        <div class="panel-heading bg-primary">
                            <div class = "row">
                                <h4 class="panel-title">
                                        <div class="col-md-1">
                                            #
                                        </div>
                                        <div class="col-md-1">
                                            Id 
                                        </div>
                                        <div class="col-md-2">
                                            Username 
                                        </div>
                                        <div class="col-md-7">
                                            Title 
                                        </div>
                                    </a>
                                </h4>
                            </div>
                        </div>
			            {% for form in formList %}
                            <div class="panel-group" id="accordion">
                              <div class="panel panel-default">
                                <div class="panel-heading bg-primary">
                                    <div class = "row">
                                        <h4 class="panel-title">
                                            <a data-toggle="collapse" data-parent="#selector" href="#collapse{{ form.id }}">
                                                <div class="col-md-1">
                                                    {{ form.index }}
                                                </div>
                                                <div class="col-md-1">
                                                    {{ form.id }} 
                                                </div>
                                                <div class="col-md-2">
                                                    {{ form.username }} 
                                                </div>
                                                <div class="col-md-7">
                                                    {{ form.title }} 
                                                </div>
                                                
                                            </a>
                                        </h4>
                                        <a type="button" class="col-xs-1 btn btn-danger btn-xs".                                                                                          href="/dynamicForms/forms/delete/{{form.id}}">
                                            <span class="glyphicon glyphicon-trash"></span> DELETE
                                        </a>
                                    </div>
                                    
                                </div>
                                <div id="collapse{{ form.id }}" class="panel-collapse collapse in">
                                    <div class="panel-body">
                                        <table class="table table-hover">
                                            <tbody>
                                            {% for v in form.versions %}
                                                <tr class = {% ifequal v.status 0 %}"info" {% else %} 
                                                            {% ifequal v.status 1 %}"success" {% else %}
                                                            {% ifequal v.status 2 %}"danger" {% endifequal %}
                                                            {% endifequal %}{% endifequal %}>
                                                    <th>Version: {{ v.number }}</th>
                                                    <th>{% ifequal v.status 0 %}DRAFT{% else %} 
                                                            {% ifequal v.status 1 %}PUBLISHED{% else %}
                                                            {% ifequal v.status 2 %}EXPIRED{% endifequal %}
                                                            {% endifequal %}{% endifequal %}</th>
                                                    <th><div class="btn-group">
                                                    <a type="button" class="btn btn-default" href= "/dynamicForms/editor#?form={{form.id}}&ver={{v.number}}"
                                                        {% ifnotequal v.status 0 %} disabled {% endifnotequal %}>
                                                        <span class="glyphicon glyphicon-pencil"></span>EDIT
                                                    </a>
                                                    <a type="button" class="btn btn-default" target="_blank" href= "/dynamicForms/preview#?form={{form.id}}&ver={{v.number}}" 
                                                        {% ifnotequal v.status 1 %} disabled {% endifnotequal %}>
                                                        <span class="glyphicon glyphicon-eye-open"></span>VIEW
                                                    </a>
                                                    <a type="button" class="btn btn-default" href = "/dynamicForms/version/{{form.id}}/{{v.number}}/new" 
                                                    {% ifequal form.lastStatus 0 %} disabled {% endifequal %}>
                                                        <span class="glyphicon glyphicon-plus"></span>NEW VERSION
                                                    </a>
                                                    <a type="button" class="btn btn-default" href = "/dynamicForms/version/{{form.id}}/{{v.number}}/duplicate"
                                                        {% ifequal v.status 0 %} disabled {% endifequal %}>    
                                                        <span class="glyphicon glyphicon-forward"></span>DUPLICATE
                                                    </a>
                                                    <a type="button" class="btn btn-default" href="/dynamicForms/version/delete/{{form.id}}/{{v.number}}"
                                                        {% ifnotequal v.status 0 %} disabled {% endifnotequal %}>
                                                        <span class="glyphicon glyphicon-remove-circle"></span>DISCARD
                                                    </a>
                                                    <a type="button" class="btn btn-default" href= "/dynamicForms/responses#?form={{form.slug}}&ver={{v.number}}"
                                                        {% ifequal v.status 0 %} disabled {% endifequal %}>
                                                        <span class="glyphicon glyphicon-pencil"></span>VIEW RESPONSES
                                                    </a>
                                                    </div></th><!-- btn-group-->
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                        </table>
                                  </div>
                                </div>
                              </div>


                        {% endfor %}
                        </div>
    				</div>
             </div>
          </div>
            
            <script src={% static "bootstrap/js/bootstrap.js" %}></script>
            <script src={% static "angular/angular.min.js" %}></script>
            <script src={% static "angular/angular-ui-router.js" %}></script>
            <script src={% static "angular/sortable.js" %}></script>
            <script src={% static "js/app.js" %}></script>
            <script src={% static "js/mainpageCtrl.js" %}></script>
      </body>                                                 
          
{%endblock%}

